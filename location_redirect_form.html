<!DOCTYPE html>
<html>
  <head>
    <title>Smart Meter Survey Redirect</title>
    <script>
      function redirectToForm(lat, long) {
        const formBaseURL = "https://docs.google.com/forms/d/e/1FAIpQLSeZzETgAvpL5lYJG_6kiYH3wh7r6t1x55epHtCbtjQ6ZkZSsQ/viewform";
        const latField = "entry.2005620554";
        const longField = "entry.1064028044";
        const formURL = `${formBaseURL}?${latField}=${lat}&${longField}=${long}`;
        window.location.href = formURL;
      }

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            const lat = position.coords.latitude;
            const long = position.coords.longitude;
            redirectToForm(lat, long);
          }, function(error) {
            alert("Location access denied or unavailable.");
          });
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }

      window.onload = getLocation;
    </script>
  </head>
  <body>
    <p>Redirecting to form with location...</p>
  </body>
</html>
